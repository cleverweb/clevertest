Взаимодействие
==============
Все что непонятно - в первую очередь к google. Во вторую спрашиваем команду. Большие вопросы обсуждаем на Symfony Group. 
Возникла ошибка, не знаем как установить и т.п. - как правило ответ можно найти через google, часто ответ есть на stackoverflow.com.
Очень помогает писать вопросы на английском (ну и вообще его знание сильно помогает, в помощь lingua leo для заучивания слов, polyglot для общения и т.п., естественно google translate).

Система
=======
Очень желательно для работы иметь Linux (лучше Ubuntu), либо OSX, либо FreeBSD.

GIT
===
Кто не знает, что это такое и зачем - ищем описание, читаем примеры на habrahabr и других ресурсах, пробуем делать уроки.
**Внимание!** в git мы используем путь внесения изменений через merge (rebase не используем).

Подготовка
==========
Добавить закладки в браузере в отдельную папку на все страницы, чтобы потом не искать долго.
Что нужно сразу установить для работы:

* VirtualBox.
* Для Linux скорее всего потребуется установить пакет NFS (network file system).
* Vagrant.
* PHPStorm (+скачать и установить symfony2 plugin).
* GIT.
* Chrome + Firefox.
* Skype.
* Dropbox.
* GitX (необязательно, но желательно).

Также необходимо зарегитрироваться на bitbucket. В своем профиле добавьте свой ssh public key (id_rsa.pub). Если его нет, нужно сначала сгенерировать этот ключ. Как - почитайте. 
После установки Git нужно [настроить свое имя](http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup).

Термины
=======

1. **Host** - ваша основная ОС на машине.
2. **Box** (Vagrant) - виртуальная система на машине.
3. **Git репозиторий** - в этом проекте у нас место размещения на BitBucket.org.

Установка проекта
=================

На host создать какую-либо директорию для проектов и директорию для проекта, например **~/Projects/cleverweb**.
В эту директорию необходимо склонировать проект из репозитория
[https://bitbucket.org/cleverweb/clevertest/overview](https://bitbucket.org/cleverweb/clevertest/overview).
Если проект уже был склонирован ранее, то его можно обновить до последней версии командой git pull.

Должен получиться вот такой путь:
**~/Projects/cleverweb/clevertest**

На **Host** также нужно добавить новый адрес, меняем hosts:

    sudo nano /etc/hosts

Добавляем:

    192.168.55.155 clevertest.l
    192.168.55.155 www.clevertest.l

Далее заходим в проект и там в директорию vagrant.
Выполняем команду **vagrant up** и ждем создания виртуальной машины (будут возможно некоторые красные сообщения, но в конце должно написать, что виртуальная машина готова и работает).
В итоге будет создан Box с ip-адресом **192.168.55.155**.
Подключение по ssh делается в этой же директории vagrant командой **vagrant ssh**.

Теперь, когда box запущен и в хостах прописан, нужно установить сам symfony-фреймворк. Заходим на box в папку /var/www/clevertest (или она же ~/clevertest) и выполняем установку проекта:

    composer install

Когда все установлено, пробуем открыть проект в браузере:
[http://clevertest.l/config.php](http://clevertest.l/config.php)

Должна отобразиться страница фрэймворка symfony с описанием окружения.




Работа над проектом
===================

Для начала рекомендую прочитать, что такое **git flow**.
В проекте мы имеем 2 основные ветки и остальные ветки по фичам (features).

1. **master** - ветки релизов. Здесь только рабочие релизы.
2. **develop** - ветка разработки.
3. **CT-100_Added_new_config** - пример ветки по задаче (номер задачи и краткое описание).

Когда Вы собираетесь делать новый функционал, вы создаете новую ветку из ветки develop (не забываем обновлять ее с репозитория - git pull), делаете необходимые изменения, создаете в ней commit, заливаете эту ветку на репозиторий и делаете pull request (запрос на внесение кода) в ветку develop. После проверки другими разработчиками эти изменения будут внесены в develop.

Как правило вся работа идет в самом PHPStorm - там очень удобная работа с GIT (основная работа с кнопками на главной панели: Update Project и Commit Changes, а также переключатель веток на нижней панели статуса.


Отладка PHPStorm, Xdebug
========================

По-умолчанию xdebug уже настроен и все что нужно, это включать отладку в PHPStrom.
Для этого заходим в меню **Run->Edit Configurations…**
Нажимаем + и добавляем **PHP Remote Debug**.

1. Name - любое.
2. Server - добавляем clevertest.l и включаем mappings - папку проекта маппим на серверную папку /var/www/clevertest
3. session id ставим CLEVERTEST.

Здесь [http://www.jetbrains.com/phpstorm/marklets/](http://www.jetbrains.com/phpstorm/marklets/) создаем себе закладки на включение и выключение отладки сайта **IDE KEY** ставим **CLEVERTEST**.
Далее запускаем отладку **Run->Debug CLEVERTEST**.
И ставим breakpoint на файле **web/config.php** на строку с **$symfonyRequirements** например.
Открываем еще раз ссылку в браузере и смотрим, как произойдет останов.

Отладка скриптов
----------------

Включаем в PHPStorm **Run->Start Listen for PHP Debug Connections**.
И далее в Box запускаем нужный скрипт, например

    app/console cache:clear



Команды перед первым запуском
=============================

Откройте проект в PHPStorm, включите в настройках Symfony2 plugin для этого проекта.
Перед первым запуском нужно подготовить проект.
Для этого нужно создать кэш, базу данных (если подготовлена), установить asset’ы:

    app/console cache:clear
    app/console doctrine:database:create
    app/console doctrine:schema:create
    app/console assets:install

Теперь можно открыть страницу с окружением dev:
[http://clevertest.l/app_dev.php](http://clevertest.l/app_dev.php)

Готово.


Плюшки
======

Для проверки, что уходит на почту из симфы в box’е установлен MailCatcher:
[http://192.168.55.155:1080/](http://192.168.55.155:1080/)

